---
title: "Survey Report"
output: html_document
params:
  one: 1
  two: 2
  three: 15
  four: 200
  five: 10
  ref.one: 0
  survey: "ExampleReport"
---

```{r setup, include=FALSE, echo=FALSE}
# -I like you to set up a report CSS style using the ‘Learning for Purpose’ brand guidelines (see attached): font, logo, colours. The colours ideally so that once can call on them by name (e.g., “orange”, “grey”) for any given purpose such as a graph
# -For the PDF report please set up a 1) cover page, 2) last page, 3) header and footer for normal pages with page number, dummy text and logo in it so I can further tweak.
# -For the HTML report please set up Logo at top and bottom,
knitr::opts_chunk$set(echo = TRUE)
external.data = mtcars
# external.data = read.csv("mtcars.csv", row.names = "X")
manual.parameter = 100

# http://stackoverflow.com/questions/36351258/turning-off-title-page-in-rmd-using-knitr
# http://tex.stackexchange.com/questions/139139/adding-headers-and-footers-using-pandoc
# http://stackoverflow.com/questions/25329375/creating-a-footer-for-every-page-using-r-markdown
# https://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

The document has parameters that can be determined by the URL served to the Shiny application. The defaults are defined in each document. The parameter labels must be strings, not numeric values (e.g. "one" is acceptable but "1" is not). Here are the parameters for this document:

Parameter | Value
------------- | -------------
ref.one | `r params$ref.one`
one | `r params$one`
two | `r params$two`
three | `r params$three`
four | `r params$four`
five | `r params$five`
manual | `r manual.parameter`


You can change these parameters by changing the URL, for instance try to visit: https://ericscheier.shinyapps.io/qualtricsreports/?one=10&two=20&three=30&four=40&five=50

When you click the download or email buttons to the left, a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r}
# code is shown for reference but can be hidden
params$one + params$two + params$three + params$four
```

You can also embed plots, for example:

```{r pressure, echo=FALSE}
# bar plot vertical
counts <- table(external.data$cyl)
barplot(counts, main="Cylinder Distribution")
# bar plot horizontal
barplot(counts, main="Cylinder Distribution", horiz=TRUE)
# pie chart w/ percents
slices <- c(params$one, params$two, params$three, params$four, params$five) 
lbls <- c("one", "two", "three", "four", "five")
pct <- round(slices/sum(slices)*100)
lbls <- paste(lbls, pct) # add percents to labels 
lbls <- paste(lbls,"%",sep="") # ad % to labels 
pie(slices,labels = lbls, col=rainbow(length(lbls)),
  	main="Pie Chart of Params")
# dot plot
# Sort by mpg, group and color by cylinder 
x <- external.data[order(external.data$mpg),] # sort by mpg
x$cyl <- factor(x$cyl) # it must be a factor
x$color[x$cyl==4] <- "red"
x$color[x$cyl==6] <- "blue"
x$color[x$cyl==8] <- "darkgreen"	
dotchart(x$mpg,labels=row.names(x),cex=.7,groups= x$cyl,
  	main="Gas Milage for Car Models\ngrouped by cylinder",
   xlab="Miles Per Gallon", gcolor="black", color=x$color)
# 2d Scatterplot which highlights requester case (x y coordinates from URL)
plot(external.data[, c("mpg","disp")])
points(params$three, params$four, col="red", pch=19)

```
